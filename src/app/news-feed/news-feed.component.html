<app-navigation-bar></app-navigation-bar>
<div class="container">
  <div *ngIf="isAdmin" class="pt-3">
    <h1 class="text-center">Showing All Posts</h1>
  </div>
  <div class="row">
    <div class="col-sm-8">
      <div *ngFor="let post of posts">
        <div class="card border-0 my-pointer pb-3">
          <div class="d-flex card-body">
            <div class="d-flex flex-column pr-5">
              <div (click)="navigate(post.id)" class="text-muted">
                {{post.category.toUpperCase()}}
              </div>
              <div (click)="navigate(post.id)" class="title">
                {{post.title}}
              </div>
              <div (click)="navigate(post.id)" class="desc-text">
                {{post.description}}
              </div>
              <div>
                Contributed by : <span (click)="navigateToProfile(post.author.id)" class="text-info"
              >{{post.author.name}}</span>
              </div>
              <div class="d-flex">
                <div class="text-muted pr-5">
                  {{post.date|date:'mediumDate'}}
                </div>
                <div *ngIf="isAdmin" class="my-pointer pr-3">
                  <a (click)="delete(post.id)" class="text-muted">Delete</a>
                </div>
              </div>
            </div>
            <div (click)="navigate(post.id)">
              <img [src]="post.image" [alt]="post.title" class="my-img">
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="!isAdmin" class="col-3 pl-2">
      <h4 class="pt-3 pb-2 pl-4">Popular Posts</h4>
      <hr class="pr-5 bg-dark w-75">
      <div>
        <div *ngFor="let i of popularPosts; let j=index" class="card border-0 mb-4 position-sticky">

          <div class="d-flex my-pointer">
            <div class="d-flex flex-column">
              <div class="d-flex">
                <div (click)="navigate(i.id)" class="fontSize1 text-muted pr-3 pt-3">{{j + 1}}</div>
                <div>
                  <div (click)="navigate(i.id)" class="text-muted">{{i.category.toUpperCase()}}</div>
                  <div><h5>{{i.title}}</h5></div>
                  <div>
                    Contributed by : <span (click)="navigateToProfile(i.author.id)" class="text-info"
                  >{{i.author.name}}</span>
                  </div>
                  <div class="text-muted">{{i.date | date: 'mediumDate'}}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
